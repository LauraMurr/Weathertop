#{extends 'main.html' /}

#{set title:'Dashboard' /}

#{menu id:"dashboard"/}

#{list items:stations, as:'station'}
<div class="content box">
    <h1 class="title">
        ${station.title}
    </h1>

</div>
<div class="columns is-desktop">
    <div class="column">
        <div class="box has-background-primary has-text-white">
            <h2 class="subtitle">Location:</h2>
            <p>${station.title}</p>
        </div>
    </div>
    <div class="column">
        <div class="box has-background-primary has-text-white">
            <h2 class="subtitle">Weather:</h2>
            <p>${new models.WeatherCode(station.latestReading.code).getDescription()}</p>

        </div>
    </div>
    <div class="column">
        <div class="box has-background-primary has-text-white">
            <h2 class="subtitle">Temperature:</h2>
            <p>${station.latestReading.temp} C</p>
            <p>${models.TempConversion.celsiusToFahrenheit(station.latestReading.temp)} F</p>
        </div>
    </div>
    <div class="column">
        <div class="box has-background-primary has-text-white">
            <h2 class="subtitle">Wind Speed:</h2>
            <p> </p>
            <p>${new models.WindSpeed(station.latestReading.wind).convertToBeaufortScale(station.latestReading.wind)}</p>
        </div>
    </div>
    <div class="column">
        <div class="box has-background-primary has-text-white">
            <h2 class="subtitle">Pressure:</h2>
            <p>${station.latestReading.pressure} hpa</p>
        </div>
    </div>
</div>



<table class="table is-fullwidth">
    <thead>
    <tr>
        <th>Weather</th>
        <th>Temperature</th>
        <th>Wind Speed</th>
        <th>Pressure</th>
    </tr>
    </thead>
    <tbody>
    #{list items:station.readings, as:'reading'}
    <tr>
        <td>${new models.WeatherCode(reading.code).getDescription()}</td>
        <td>${reading.temp} C</td>
        <td>${reading.wind} Km/h<br>
            ${new models.WindSpeed(reading.wind).convertToBeaufortScale(reading.wind)}</td>
        <td>${reading.pressure} hpa</td>
    </tr>
    #{/list}
    </tbody>
</table>
#{/list}